<div cg-busy="myPromise"></div>
<div class="col-md-6 create-prescriptions">
  <form name="formPrescription" class="panel-group" novalidate>
    <div class="panel panel-primary">
      <div class="panel-heading">Patient Diagnosis</div>
      <div class="panel-body">
        <div class="form-group"  ng-class="{ 'has-error': formPrescription.patientComplaint.$touched && formPrescription.patientComplaint.$invalid }">
          <label for="patientComplaint">Patient Complaint*</label>
          <textarea class="form-control" name="patientComplaint" ng-model="prescription.patientComplaint" id="patientComplaint" rows="3" placeholder="Patient Complaint" required></textarea>
          <div class="help-block" ng-messages="formPrescription.patientComplaint.$error" ng-if="formPrescription.patientComplaint.$touched">
              <p ng-message="required">Patient Complaint is mandatory!</p>
          </div>
        </div>
        <div class="form-group" ng-class="{ 'has-error': formPrescription.diagnosis.$touched && formPrescription.diagnosis.$invalid }">
          <label for="diagnosis">Diagnosis*</label>
          <textarea class="form-control" name="diagnosis" ng-model="prescription.diagnosis" id="diagnosis" rows="4" placeholder="Diagnosis" required></textarea>
          <div class="help-block" ng-messages="formPrescription.diagnosis.$error" ng-if="formPrescription.diagnosis.$touched">
              <p ng-message="required">Patient Diagnosis is mandatory!</p>
          </div>
        </div>
      </div>
    </div>
    <div class="panel panel-primary">
      <div class="panel-heading">Medications</div>
      <div class="panel-body">
        <div class="form-group">
          <div class="row">
            <div class="col-md-4">
              <a ui-sref="PrescriptionNewOrEdit.UpsertMedicine"><strong>+ Add Medicine</strong></a>
            </div>
          </div>
          <hr>
          <medicines editable="true"></medicines>
        </div>
      </div>
    </div>
    <div class="panel panel-info">
      <div class="panel-heading">Other</div>
      <div class="panel-body">
        <div class="form-group">
          <label for="validUpto">Valid Upto</label>
          <datetimepicker ng-model="prescription.validUpto" id="validUpto" placeholder="Prescription Valid Upto"></datetimepicker>
        </div>
        <div class="form-group">
          <label for="nextVisit">Next Visit</label>
          <datetimepicker ng-model="prescription.nextVisit.date" id="nextVisit" placeholder="Schedule Next Visit"></datetimepicker>
        </div>
      </div>
    </div>
    <hr>
    <div class="form-group">
        <button type="button" class="btn btn-primary" ng-click="save()" ng-disabled="formPrescription.$invalid">Save</button>
        <button type="button" class="btn btn-primary" ng-click="savePrint()" ng-disabled="formPrescription.$invalid">Save & Print</button>
        <button type="button" class="btn btn-default" ng-click="close()">Cancel</button>
    </div>
  </form>
</div>
<div class="col-md-6 add-new-medicine" ui-view></div>