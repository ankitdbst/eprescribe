<div cg-busy="myPromise"></div>
<!--show last 25 patient visit -->
<table class="table table-hover table-condensed">
    <thead>
        <tr>
            <th>
                <a href="" ng-click="sortSearchResultsType = 'creationDate'; sortSearchResultsReverse = !sortSearchResultsReverse">
                    Date
                    <span ng-show="sortSearchResultsType == 'creationDate' && !sortSearchResultsReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortSearchResultsType == 'creationDate' && sortSearchResultsReverse" class="fa fa-caret-up"></span>
                </a>
            </th>
            <th ng-if="!canvasEnabled">
                <a href="" ng-click="sortSearchResultsType = 'patientComplaint'; sortSearchResultsReverse = !sortSearchResultsReverse">
                    Patient Complaint
                    <span ng-show="sortSearchResultsType == 'patientComplaint' && !sortSearchResultsReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortSearchResultsType == 'patientComplaint' && sortSearchResultsReverse" class="fa fa-caret-up"></span>
                </a>
            </th>

            <th ng-if="!canvasEnabled">
                <a href="" ng-click="sortSearchResultsType = 'diagnosis'; sortSearchResultsReverse = !sortSearchResultsReverse">
                    Diagnosis
                    <span ng-show="sortSearchResultsType == 'diagnosis' && !sortSearchResultsReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortSearchResultsType == 'diagnosis' && sortSearchResultsReverse" class="fa fa-caret-up"></span>
                </a>
            </th>
            <th>Diseases</th>
            <th>Medicines</th>
            <th>
                <a href="" ng-click="sortSearchResultsType = 'nextVisit.date'; sortSearchResultsReverse = !sortSearchResultsReverse">
                    Next Visit
                    <span ng-show="sortSearchResultsType == 'nextVisit.date' && !sortSearchResultsReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortSearchResultsType == 'nextVisit.date' && sortSearchResultsReverse" class="fa fa-caret-up"></span>
                </a>
            </th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        <tr ng-repeat="prescription in prescriptions | orderBy:sortSearchResultsType:sortSearchResultsReverse" class="eremedium-prescription-list">
            <td>
                <a uib-tooltip="View Prescription" ui-sref="PatientNewOrEdit.PrescriptionIndex.Detail({ prescriptionId: prescription.pid })">{{prescription.creationDate| date:'medium'}}</a></td>
            <td ng-if="!canvasEnabled">{{ prescription.patientComplaint}}</td>
            <td ng-if="!canvasEnabled">{{ prescription.diagnosis}}</td>
            <td>
                <ul class="eremedium-prescription-item-list">
                    <li ng-repeat="disease in prescription.diseases">
                        <span class="label label-default">{{disease.disease}}</span>
                    </li>
                </ul>
            </td>
            <td>
                <ul class="eremedium-prescription-item-list list-unstyled">
                    <li ng-repeat="medicine in prescription.medcines">
                        <span class="label label-default">{{medicine.name}}</span>
                    </li>
                </ul>
            </td>
            <td>{{prescription.nextVisit.date| date:'medium'}}</td>
            <td>
                <ul class="list-inline list-unstyled">
                  <li><a ng-click="$parent.clone(prescription.pid)"><span class="glyphicon glyphicon-file" aria-hidden="true"></span></a></li>
                  <li><a ng-click="delete($index)"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a></li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>