<div cg-busy="myPromise"></div>
<table class="table table-hover table-condensed">
    <thead>
        <tr>
            <th>
                <a href="" ng-click="sortSearchResultsType = 'creationDate'; sortSearchResultsReverse = !sortSearchResultsReverse">
                    Date
                    <span ng-show="sortSearchResultsType == 'creationDate' && !sortSearchResultsReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortSearchResultsType == 'creationDate' && sortSearchResultsReverse" class="fa fa-caret-up"></span>
                </a>
            </th>
            <th ng-if="!canvasEnabled">
                <a href="" ng-click="sortSearchResultsType = 'patientComplaint'; sortSearchResultsReverse = !sortSearchResultsReverse">
                    Patient Complaint
                    <span ng-show="sortSearchResultsType == 'patientComplaint' && !sortSearchResultsReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortSearchResultsType == 'patientComplaint' && sortSearchResultsReverse" class="fa fa-caret-up"></span>
                </a>
            </th>

            <th ng-if="!canvasEnabled">
                <a href="" ng-click="sortSearchResultsType = 'diagnosis'; sortSearchResultsReverse = !sortSearchResultsReverse">
                    Diagnosis
                    <span ng-show="sortSearchResultsType == 'diagnosis' && !sortSearchResultsReverse" class="fa fa-caret-down"></span>
                    <span ng-show="sortSearchResultsType == 'diagnosis' && sortSearchResultsReverse" class="fa fa-caret-up"></span>
                </a>
            </th>
            <th>Medicines</th>
            <th>Lab Tests</th>
            <th>Prescribed By</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <tr ng-click="detail(prescription.pid)" ng-repeat="prescription in prescriptions| orderBy:sortSearchResultsType:sortSearchResultsReverse" class="eremedium-prescription-list">
            <td>
                <a ui-sref="PrescriptionIndex.Detail({ prescriptionId: prescription.pid })">{{prescription.creationDate| date:'short'}}</a></td>
            <td ng-if="!canvasEnabled">{{ prescription.patientComplaint}}</td>
            <td ng-if="!canvasEnabled">{{ prescription.diagnosis}}</td>
            <td>
                <ul class="eremedium-prescription-item-list list-unstyled">
                    <li ng-repeat="medicine in prescription.medcines">
                        <span class="label label-default">{{medicine.name}}</span>
                    </li>
                </ul>
            </td>
            <td>
                <ul class="eremedium-prescription-item-list list-unstyled">
                    <li ng-repeat="advise in prescription.advises">
                        <span class="label label-info">{{advise.name}}</span>
                    </li>
                </ul>
            </td>
            <td>{{doctorName}}</td>
            <td >
                <a ng-click="$parent.clone(prescription.pid)">
                    <i class="fa fa-clone fa-2x"></i>
                </a>
            </td>
        </tr>
    </tbody>
</table>

<div class="pull-right">
    <button type="button" class="btn btn-primary btn-xs" ng-click="load()">
        <i class="fa fa-chevron-down fa-2x" aria-hidden="true"></i>
    </button>
</div>
